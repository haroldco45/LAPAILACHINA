<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA PAILA CHINA - Pedidos</title>
    <style>
        :root {
            --rojo: #CC0000;
            --dorado: #FFD700;
            --negro: #1a1a1a;
            --gris-card: #222222;
            --verde-precio: #2ecc71;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--negro);
            color: white;
            margin: 0;
            padding-bottom: 110px;
        }

        #bloqueo-pago {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 99999; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 30px;
        }

        header {
            background-color: var(--rojo);
            text-align: center;
            padding: 15px;
            border-bottom: 4px solid var(--dorado);
        }

        .logo-img { max-width: 100px; margin-bottom: 5px; }
        .titulo-app { font-size: 24px; font-weight: bold; color: var(--dorado); margin: 0; text-transform: uppercase; }
        .firma { font-size: 10px; color: white; margin-top: 2px; font-style: italic; letter-spacing: 1px; }

        .container { padding: 15px; }
        .categoria-titulo { 
            color: var(--dorado); 
            border-bottom: 1px solid var(--rojo); 
            padding: 10px 0; 
            margin-top: 20px;
            text-transform: uppercase;
            font-size: 1.1em;
        }

        .plato-card {
            background: var(--gris-card);
            border-radius: 12px;
            padding: 15px;
            margin-top: 10px;
            border-left: 5px solid var(--rojo);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .plato-info .nombre { color: var(--dorado); font-weight: bold; font-size: 1.05em; }
        .plato-info .precio { color: var(--verde-precio); font-weight: bold; font-size: 1.1em; margin-top: 5px; }

        .controles { display: flex; align-items: center; gap: 12px; }
        .btn-accion {
            background: var(--rojo); color: white; border: none;
            width: 35px; height: 35px; border-radius: 50%;
            font-size: 20px; font-weight: bold; cursor: pointer;
        }

        textarea {
            width: 100%; height: 80px; background: #111; color: white;
            border: 1px solid #333; border-radius: 8px; padding: 10px;
            margin-top: 15px; box-sizing: border-box;
        }

        .footer {
            position: fixed; bottom: 0; width: 100%; background: #000;
            padding: 15px 20px; border-top: 2px solid #333;
            display: flex; justify-content: space-between; align-items: center; box-sizing: border-box;
        }

        .btn-pedir {
            background: #25D366; color: white; border: none;
            padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;
        }

        .oculto { display: none !important; }
    </style>
</head>
<body>

<div id="bloqueo-pago">
    <h1 style="color: var(--dorado);">üèÆ</h1>
    <h2>SERVICIO SUSPENDIDO</h2>
    <p>Contacte al administrador para reactivar su licencia.</p>
</div>

<div id="app-content">
    <header>
        <img src="paila-china.png" class="logo-img" onerror="this.style.display='none'">
        <div class="titulo-app">LA PAILA CHINA</div>
        <div class="firma">Hecha por Vibras Positivas</div>
        <div style="font-size: 11px; margin-top: 5px;">üìç Caucasia | üìû 311 770 0431</div>
    </header>

    <div class="container">
        <div id="registro" class="oculto">
            <h3 style="text-align: center; color: var(--dorado);">Datos de Entrega</h3>
            <input type="text" id="r-nom" placeholder="Nombre Completo" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:none; background:#111; color:white;">
            <input type="text" id="r-dir" placeholder="Direcci√≥n Exacta" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:none; background:#111; color:white;">
            <input type="tel" id="r-tel" placeholder="Celular" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:none; background:#111; color:white;">
            <button onclick="guardarU()" class="btn-pedir" style="width: 100%; background: var(--rojo);">ENTRAR AL MEN√ö</button>
        </div>

        <div id="menu-cont">
            <div class="categoria-titulo">Almuerzos con Sopa</div>
            <div id="items-almuerzos"></div>

            <div class="categoria-titulo">Arroz Chino</div>
            <div id="items-arroz"></div>

            <div class="categoria-titulo">Combos Especiales</div>
            <div id="items-combos"></div>
        </div>

        <textarea id="obs" placeholder="Observaciones: (Ej. Sin cebolla, casa de rejas...)"></textarea>
    </div>

    <div class="footer">
        <div style="font-weight: bold;">Total: <span id="total-val" style="color: var(--dorado);">$0</span></div>
        <button class="btn-pedir" onclick="enviarPedido()">Pedir por WhatsApp</button>
    </div>
</div>

<script>
    const APP_ACTIVA = true; // CONTROL DE COBRO

    const menuData = {
        // ALMUERZOS
        "mote": { n: "Mote, Mondongo o Sopa de Gallina", p: 21000, cat: "almuerzos" },
        "frijoles": { n: "Frijoles o Sopa del d√≠a", p: 20000, cat: "almuerzos" },
        // ARROZ CHINO
        "arroz1": { n: "Arroz Chino Personal", p: 17000, cat: "arroz" },
        "arroz2": { n: "Arroz Chino 2 Personas", p: 23000, cat: "arroz" },
        "arroz4": { n: "Arroz Chino 4 Personas", p: 32000, cat: "arroz" },
        "arroz6": { n: "Arroz Chino 6 Personas", p: 40000, cat: "arroz" },
        "arroz9": { n: "Arroz Chino 9 Personas", p: 50000, cat: "arroz" },
        // COMBOS
        "mega": { n: "1 Pollo + Arroz Mega", p: 73000, cat: "combos" },
        "grande": { n: "1 Pollo + Arroz Grande", p: 63000, cat: "combos" },
        "mediano": { n: "1/2 Pollo + Arroz Mediano", p: 45000, cat: "combos" },
        "cuarto": { n: "1/4 Pollo + Arroz", p: 31000, cat: "combos" },
        "presa_p": { n: "1 Presa + Arroz Personal", p: 22000, cat: "combos" },
        "presa_c": { n: "1 Presa + Arroz + Chop Suey", p: 25000, cat: "combos" }
    };

    let carrito = {};

    window.onload = () => {
        if (!APP_ACTIVA) {
            document.getElementById('bloqueo-pago').style.display = 'flex';
            document.getElementById('app-content').classList.add('oculto');
            return;
        }
        if (!localStorage.getItem('p_user')) {
            document.getElementById('registro').classList.remove('oculto');
            document.getElementById('menu-cont').classList.add('oculto');
        }
        renderMenu();
    };

    function renderMenu() {
        for (let id in menuData) {
            const item = menuData[id];
            const html = `
                <div class="plato-card">
                    <div class="plato-info">
                        <div class="nombre">${item.n}</div>
                        <div class="precio">$${item.p.toLocaleString('es-CO')}</div>
                    </div>
                    <div class="controles">
                        <button class="btn-accion" onclick="sumar('${id}', -1)">-</button>
                        <span id="cant-${id}" style="font-weight:bold; width:20px; text-align:center;">0</span>
                        <button class="btn-accion" onclick="sumar('${id}', 1)">+</button>
                    </div>
                </div>`;
            document.getElementById('items-' + item.cat).innerHTML += html;
        }
    }

    function guardarU() {
        const n = document.getElementById('r-nom').value, d = document.getElementById('r-dir').value, t = document.getElementById('r-tel').value;
        if(n && d && t) {
            localStorage.setItem('p_user', JSON.stringify({n, d, t}));
            location.reload();
        } else alert("Llena todos los campos.");
    }

    function sumar(id, v) {
        carrito[id] = Math.max(0, (carrito[id] || 0) + v);
        document.getElementById('cant-' + id).innerText = carrito[id];
        let total = 0;
        for (let k in carrito) total += carrito[k] * menuData[k].p;
        document.getElementById('total-val').innerText = "$" + total.toLocaleString('es-CO');
    }

    function enviarPedido() {
        let total = 0, detalle = "", user = JSON.parse(localStorage.getItem('p_user'));
        for (let k in carrito) {
            if (carrito[k] > 0) {
                total += carrito[k] * menuData[k].p;
                detalle += `‚Ä¢ ${carrito[k]}x ${menuData[k].n} ($${(carrito[k] * menuData[k].p).toLocaleString('es-CO')})\n`;
            }
        }
        if (total === 0) return alert("Agrega algo al pedido.");
        
        let msg = `üèÆ *NUEVO PEDIDO: LA PAILA CHINA* üèÆ\n\n*CLIENTE:* ${user.n}\n*DIR:* ${user.d}\n*TEL:* ${user.t}\n\n*DETALLE:*\n${detalle}\n*TOTAL: $${total.toLocaleString('es-CO')}*\n\n*OBS:* ${document.getElementById('obs').value || 'Ninguna'}`;
        window.open(`https://wa.me/573117700431?text=${encodeURIComponent(msg)}`, '_blank');
    }
</script>
</body>
</html>
