<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA PAILA CHINA - Pedidos</title>
    <style>
        :root {
            --rojo: #CC0000;
            --dorado: #FFD700;
            --negro: #1a1a1a;
            --gris-card: #222222;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--negro);
            color: white;
            margin: 0;
            padding-bottom: 90px;
        }

        /* PANTALLA DE BLOQUEO (CONTROL DE SUSCRIPCI칍N) */
        #bloqueo-pago {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 99999; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 30px;
        }

        header {
            background-color: var(--rojo);
            text-align: center;
            padding: 15px;
            border-bottom: 4px solid var(--dorado);
        }

        .titulo-empresa { font-size: 24px; font-weight: bold; color: var(--dorado); margin: 0; text-transform: uppercase; }
        .firma-vibras { font-size: 10px; color: white; margin-top: 2px; letter-spacing: 1px; font-style: italic; }
        .subtitulo { font-size: 13px; margin-top: 5px; opacity: 0.9; }

        .container { padding: 15px; }

        .plato-card {
            background: var(--gris-card);
            border-radius: 15px;
            padding: 15px;
            border-left: 5px solid var(--rojo);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .plato-info .nombre { color: var(--dorado); font-weight: bold; font-size: 1.1em; }
        .plato-info .desc { font-size: 0.85em; color: #aaa; margin: 4px 0; }
        .plato-info .precio { color: #28a745; font-weight: bold; font-size: 1.1em; }

        .controles { display: flex; align-items: center; gap: 15px; }
        .btn-accion {
            background: var(--rojo); color: white; border: none;
            width: 40px; height: 40px; border-radius: 50%;
            font-size: 22px; font-weight: bold; cursor: pointer;
        }

        input, textarea {
            width: 100%; background: #111; color: white;
            border: 1px solid #333; border-radius: 10px; padding: 12px;
            margin-top: 10px; box-sizing: border-box; font-size: 16px;
        }

        .footer {
            position: fixed; bottom: 0; width: 100%; background: #000;
            padding: 15px 20px; border-top: 2px solid #333;
            display: flex; justify-content: space-between; align-items: center; box-sizing: border-box;
        }

        .btn-whatsapp {
            background: #25D366; color: white; border: none;
            padding: 12px 20px; border-radius: 25px; font-weight: bold;
            cursor: pointer; font-size: 16px;
        }

        .oculto { display: none !important; }
    </style>
</head>
<body>

<div id="bloqueo-pago">
    <h1 style="font-size: 60px; margin: 0;">游낉</h1>
    <h2 style="color: var(--dorado);">SERVICIO SUSPENDIDO</h2>
    <p>La licencia de esta aplicaci칩n ha expirado o se encuentra en mantenimiento.</p>
    <p>Para reactivar el servicio, contacte al desarrollador.</p>
</div>

<div id="app-content">
    <header>
        <div class="titulo-empresa">LA PAILA CHINA</div>
        <div class="firma-vibras">Hecha por Vibras Positivas</div>
        <div class="subtitulo">游늸 Caucasia, Antioquia | 游 311 770 0431</div>
    </header>

    <div class="container">
        <div id="registro-paila" class="oculto">
            <h3 style="color: var(--dorado); text-align: center;">Datos del Cliente</h3>
            <p style="text-align: center; font-size: 12px; margin-bottom: 20px;">Por favor, ingresa tus datos para procesar el domicilio.</p>
            <input type="text" id="reg-nom" placeholder="Nombre Completo">
            <input type="text" id="reg-dir" placeholder="Direcci칩n Exacta">
            <input type="tel" id="reg-tel" placeholder="N칰mero Celular">
            <button onclick="guardarRegistro()" class="btn-whatsapp" style="width: 100%; background: var(--rojo); margin-top: 15px;">GUARDAR Y VER MEN칔</button>
        </div>

        <div id="menu-paila">
            <div class="plato-card">
                <div class="plato-info">
                    <div class="nombre">Arroz Especial</div>
                    <div class="desc">Lomo, pollo, ra칤ces chinas y salsa soja.</div>
                    <div class="precio">$28.000</div>
                </div>
                <div class="controles">
                    <button class="btn-accion" onclick="modificar(-1)">-</button>
                    <span id="cantidad-txt" style="font-size: 20px; font-weight: bold;">0</span>
                    <button class="btn-accion" onclick="modificar(1)">+</button>
                </div>
            </div>

            <h3 style="margin-top: 30px; font-size: 1.1em; border-bottom: 1px solid #333; padding-bottom: 5px;">Observaciones</h3>
            <textarea id="pedido-obs" placeholder="Ej: Traer cambio de 50 mil, casa azul, sin cebolla..."></textarea>
        </div>
    </div>

    <div class="footer">
        <div style="font-weight: bold;">Total: <span id="total-val" style="color: var(--dorado);">$0</span></div>
        <button class="btn-whatsapp" onclick="enviarPedido()">Pedir por WhatsApp</button>
    </div>
</div>

<script>
    /* ==========================================
       LLAVE DE ACCESO (TU CONTROL TOTAL)
       ========================================== */
    const APP_ACTIVA = true; // CAMBIA A "false" PARA BLOQUEAR DESDE GITHUB
    /* ========================================== */

    let cantidad = 0;
    const precioPlato = 28000;

    window.onload = function() {
        // Verificar si la suscripci칩n est치 activa
        if (!APP_ACTIVA) {
            document.getElementById('bloqueo-pago').style.display = 'flex';
            document.getElementById('app-content').classList.add('oculto');
            return;
        }

        // Verificar si existen datos guardados en memoria
        if (!localStorage.getItem('paila_user_data')) {
            document.getElementById('registro-paila').classList.remove('oculto');
            document.getElementById('menu-paila').classList.add('oculto');
        }

        // Iniciar consecutivo de pedidos
        if (!localStorage.getItem('paila_consecutivo')) {
            localStorage.setItem('paila_consecutivo', 1);
        }
    };

    function guardarRegistro() {
        const nom = document.getElementById('reg-nom').value;
        const dir = document.getElementById('reg-dir').value;
        const tel = document.getElementById('reg-tel').value;
        
        if (nom && dir && tel) {
            const data = { nombre: nom, direccion: dir, telefono: tel };
            localStorage.setItem('paila_user_data', JSON.stringify(data));
            location.reload();
        } else {
            alert("Por favor completa todos los campos para continuar.");
        }
    }

    function modificar(valor) {
        cantidad = Math.max(0, cantidad + valor);
        document.getElementById('cantidad-txt').innerText = cantidad;
        document.getElementById('total-val').innerText = "$" + (cantidad * precioPlato).toLocaleString('es-CO');
    }

    function enviarPedido() {
        if (cantidad === 0) return alert("Primero debes agregar platos a tu pedido.");
        
        const user = JSON.parse(localStorage.getItem('paila_user_data'));
        const consec = localStorage.getItem('paila_consecutivo');
        const obs = document.getElementById('pedido-obs').value || 'Ninguna';
        const fecha = new Date().toLocaleString("es-CO", {timeZone: "America/Bogota"});

        let mensaje = `游낉 *NUEVO PEDIDO: LA PAILA CHINA* 游낉\n`;
        mensaje += `----------------------------------\n`;
        mensaje += `*Pedido No:* #${consec}\n`;
        mensaje += `*Fecha:* ${fecha}\n\n`;
        mensaje += `*CLIENTE:* ${user.nombre}\n`;
        mensaje += `*DIRECCI칍N:* ${user.direccion}\n`;
        mensaje += `*TEL칄FONO:* ${user.telefono}\n\n`;
        mensaje += `*PRODUCTO:* ${cantidad}x Arroz Especial ($${(cantidad * precioPlato).toLocaleString('es-CO')})\n`;
        mensaje += `*OBS:* ${obs}\n`;
        mensaje += `----------------------------------\n`;
        mensaje += `*TOTAL A PAGAR: $${(cantidad * precioPlato).toLocaleString('es-CO')}*`;

        // Incrementar consecutivo
        localStorage.setItem('paila_consecutivo', parseInt(consec) + 1);

        // Enviar a WhatsApp del due침o
        const numDuenio = "573117700431";
        window.open(`https://wa.me/${numDuenio}?text=${encodeURIComponent(mensaje)}`, '_blank');
    }
</script>

</body>
</html>
